// Code generated by goa v3.7.6, DO NOT EDIT.
//
// Poller gRPC client types
//
// Command:
// $ goa gen github.com/crossnokaye/carbon/services/poller/design -o
// services/poller

package client

import (
	pollerpb "github.com/crossnokaye/carbon/services/poller/gen/grpc/poller/pb"
	poller "github.com/crossnokaye/carbon/services/poller/gen/poller"
	goa "goa.design/goa/v3/pkg"
)

// NewProtoUpdateRequest builds the gRPC request type from the payload of the
// "update" endpoint of the "Poller" service.
func NewProtoUpdateRequest() *pollerpb.UpdateRequest {
	message := &pollerpb.UpdateRequest{}
	return message
}

// NewProtoGetEmissionsForRegionRequest builds the gRPC request type from the
// payload of the "get_emissions_for_region" endpoint of the "Poller" service.
func NewProtoGetEmissionsForRegionRequest(payload *poller.CarbonPayload) *pollerpb.GetEmissionsForRegionRequest {
	message := &pollerpb.GetEmissionsForRegionRequest{}
	if payload.Region != nil {
		message.Region = *payload.Region
	}
	if payload.Start != nil {
		message.Start = *payload.Start
	}
	if payload.End != nil {
		message.End = *payload.End
	}
	return message
}

// NewGetEmissionsForRegionResult builds the result type of the
// "get_emissions_for_region" endpoint of the "Poller" service from the gRPC
// response type.
func NewGetEmissionsForRegionResult(message *pollerpb.GetEmissionsForRegionResponse) []*poller.CarbonForecast {
	result := make([]*poller.CarbonForecast, len(message.Field))
	for i, val := range message.Field {
		result[i] = &poller.CarbonForecast{
			GeneratedRate: val.GeneratedRate,
			MarginalRate:  val.MarginalRate,
			ConsumedRate:  val.ConsumedRate,
			DurationType:  val.DurationType,
			Region:        val.Region,
		}
		if val.Duration != nil {
			result[i].Duration = protobufPollerpbPeriodToPollerPeriod(val.Duration)
		}
	}
	return result
}

// ValidateGetEmissionsForRegionResponse runs the validations defined on
// GetEmissionsForRegionResponse.
func ValidateGetEmissionsForRegionResponse(message *pollerpb.GetEmissionsForRegionResponse) (err error) {
	for _, e := range message.Field {
		if e != nil {
			if err2 := ValidateCarbonForecast(e); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	return
}

// ValidateCarbonForecast runs the validations defined on CarbonForecast.
func ValidateCarbonForecast(message *pollerpb.CarbonForecast) (err error) {
	if message.Duration == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("Duration", "message"))
	}
	if message.Duration != nil {
		if err2 := ValidatePeriod(message.Duration); err2 != nil {
			err = goa.MergeErrors(err, err2)
		}
	}
	return
}

// ValidatePeriod runs the validations defined on Period.
func ValidatePeriod(message *pollerpb.Period) (err error) {
	err = goa.MergeErrors(err, goa.ValidateFormat("message.startTime", message.StartTime, goa.FormatDateTime))

	err = goa.MergeErrors(err, goa.ValidateFormat("message.endTime", message.EndTime, goa.FormatDateTime))

	return
}

// svcPollerPeriodToPollerpbPeriod builds a value of type *pollerpb.Period from
// a value of type *poller.Period.
func svcPollerPeriodToPollerpbPeriod(v *poller.Period) *pollerpb.Period {
	res := &pollerpb.Period{
		StartTime: v.StartTime,
		EndTime:   v.EndTime,
	}

	return res
}

// protobufPollerpbPeriodToPollerPeriod builds a value of type *poller.Period
// from a value of type *pollerpb.Period.
func protobufPollerpbPeriodToPollerPeriod(v *pollerpb.Period) *poller.Period {
	res := &poller.Period{
		StartTime: v.StartTime,
		EndTime:   v.EndTime,
	}

	return res
}
